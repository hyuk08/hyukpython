<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³µë£¡ ì í”„ ê²Œì„ ğŸ¦•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .game-container {
            background: #fff;
            border-radius: 0;
            padding: 20px;
            box-shadow: 0 0 0 2px #000;
            text-align: center;
            max-width: 900px;
            width: 95%;
            max-height: 95vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        h1 {
            color: #000;
            margin-bottom: 15px;
            font-size: clamp(1.5em, 4vw, 2.5em);
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            font-size: clamp(0.9em, 2vw, 1.2em);
            color: #000;
            flex-shrink: 0;
        }

        .score-item {
            background: #fff;
            border: 2px solid #000;
            padding: 8px 15px;
            border-radius: 0;
        }

        .canvas-wrapper {
            width: 100%;
            flex: 1;
            min-height: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #gameCanvas {
            background: #fff;
            border: 3px solid #000;
            border-radius: 0;
            display: block;
            max-width: 100%;
            max-height: 100%;
            width: 100%;
            height: auto;
            aspect-ratio: 2 / 1;
        }

        .controls {
            margin-top: 15px;
            color: #000;
            font-size: clamp(0.8em, 2vw, 0.9em);
            flex-shrink: 0;
        }

        @media (max-width: 768px) {
            .game-container {
                padding: 15px;
                width: 98%;
                max-height: 98vh;
            }

            .score-board {
                flex-direction: column;
                gap: 10px;
            }

            .score-item {
                padding: 6px 12px;
            }

            h1 {
                margin-bottom: 10px;
            }

            .controls {
                margin-top: 10px;
            }
        }

        @media (max-height: 600px) {
            .game-container {
                padding: 10px;
            }

            h1 {
                font-size: 1.5em;
                margin-bottom: 8px;
            }

            .score-board {
                margin-bottom: 8px;
                font-size: 0.9em;
            }

            .controls {
                margin-top: 8px;
                font-size: 0.75em;
            }
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            border: 3px solid #000;
            color: #000;
            padding: 40px;
            border-radius: 0;
            text-align: center;
            display: none;
            z-index: 1000;
        }

        .game-over h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #000;
        }

        .game-over button {
            background: #000;
            color: #fff;
            border: 2px solid #000;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 0;
            cursor: pointer;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
        }

        .game-over button:hover {
            background: #fff;
            color: #000;
            transform: scale(1.05);
        }

        .start-screen {
            text-align: center;
            padding: 20px;
        }

        .start-screen h2 {
            color: #000;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .start-screen button {
            background: #000;
            color: #fff;
            border: 2px solid #000;
            padding: 15px 40px;
            font-size: 1.3em;
            border-radius: 0;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
        }

        .start-screen button:hover {
            background: #fff;
            color: #000;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ¦• ê³µë£¡ ì í”„ ê²Œì„</h1>
        
        <div class="score-board">
            <div class="score-item">
                <strong>ì ìˆ˜:</strong> <span id="score">0</span>
            </div>
            <div class="score-item">
                <strong>ìµœê³ ì ìˆ˜:</strong> <span id="highScore">0</span>
            </div>
        </div>

        <div class="canvas-wrapper">
            <canvas id="gameCanvas"></canvas>
        </div>

        <div class="controls">
            <p>ğŸ® ìŠ¤í˜ì´ìŠ¤ë°” ë˜ëŠ” â†‘ í‚¤ë¥¼ ëˆŒëŸ¬ ì í”„í•˜ì„¸ìš”!</p>
            <p>ğŸš« ì¥ì• ë¬¼ì„ í”¼í•˜ì„¸ìš”!</p>
        </div>

        <div class="start-screen" id="startScreen">
            <h2>ê²Œì„ ì‹œì‘</h2>
            <button onclick="startGame()">ì‹œì‘í•˜ê¸°</button>
        </div>

        <div class="game-over" id="gameOver">
            <h2>ê²Œì„ ì˜¤ë²„!</h2>
            <p>ìµœì¢… ì ìˆ˜: <span id="finalScore">0</span></p>
            <button onclick="restartGame()">ë‹¤ì‹œ ì‹œì‘</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const highScoreElement = document.getElementById('highScore');
        const gameOverScreen = document.getElementById('gameOver');
        const startScreen = document.getElementById('startScreen');
        const finalScoreElement = document.getElementById('finalScore');

        // ìº”ë²„ìŠ¤ í¬ê¸° ì„¤ì • (ë°˜ì‘í˜•)
        const BASE_WIDTH = 800;
        const BASE_HEIGHT = 400;
        let scale = 1;

        function resizeCanvas() {
            const container = canvas.parentElement;
            const maxWidth = container.clientWidth - 20; // íŒ¨ë”© ê³ ë ¤
            const maxHeight = window.innerHeight * 0.6; // í™”ë©´ ë†’ì´ì˜ 60%
            
            let width = Math.min(maxWidth, BASE_WIDTH);
            let height = width * (BASE_HEIGHT / BASE_WIDTH);
            
            if (height > maxHeight) {
                height = maxHeight;
                width = height * (BASE_WIDTH / BASE_HEIGHT);
            }
            
            canvas.width = width;
            canvas.height = height;
            scale = width / BASE_WIDTH;
        }

        // ì´ˆê¸° í¬ê¸° ì„¤ì • ë° ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // ê²Œì„ ìƒíƒœ
        let gameRunning = false;
        let gameSpeed = 5;
        let score = 0;
        let highScore = localStorage.getItem('dinoHighScore') || 0;
        highScoreElement.textContent = highScore;

        // ê³µë£¡ ê°ì²´
        const dino = {
            x: 100,
            y: 300,
            width: 60,
            height: 60,
            velocityY: 0,
            jumpPower: -15,
            gravity: 0.8,
            onGround: true,
            color: '#4ecdc4'
        };

        // ì¥ì• ë¬¼ ë°°ì—´
        let obstacles = [];
        let obstacleTimer = 0;

        // ì´ˆê¸°í™”
        function init() {
            const groundY = BASE_HEIGHT - 50; // ê¸°ë³¸ ì§€ë©´ ìœ„ì¹˜ (ìŠ¤ì¼€ì¼ ì ìš© ì „)
            dino.x = 100;
            dino.y = groundY - dino.height;
            dino.velocityY = 0;
            obstacles = [];
            obstacleTimer = 0;
            score = 0;
            gameSpeed = 5;
            scoreElement.textContent = score;
        }

        // ê³µë£¡ ê·¸ë¦¬ê¸° (ê²€ì€ìƒ‰/í°ìƒ‰, ê°ì§„ ìŠ¤íƒ€ì¼, ì˜¤ë¥¸ìª½ì„ í–¥í•¨)
        function drawDino() {
            const x = dino.x * scale;
            const y = dino.y * scale;
            const width = dino.width * scale;
            const height = dino.height * scale;
            
            ctx.save();
            ctx.translate(x, y);
            
            // ê²€ì€ìƒ‰
            ctx.fillStyle = '#000';
            
            // ëª¸í†µ (ê°ì§„ ì‚¬ê°í˜•)
            ctx.fillRect(width * 0.15, height * 0.3, width * 0.5, height * 0.4);
            
            // ë¨¸ë¦¬ (ê°ì§„ ì‚¬ê°í˜•, ì˜¤ë¥¸ìª½ì—)
            ctx.fillRect(width * 0.5, height * 0.15, width * 0.35, height * 0.35);
            
            // ëª© (ë¨¸ë¦¬ì™€ ëª¸í†µ ì—°ê²°)
            ctx.fillRect(width * 0.5, height * 0.4, width * 0.15, height * 0.15);
            
            // ê¼¬ë¦¬ (ì™¼ìª½ì—, ê°ì§„ ì‚¼ê°í˜•)
            ctx.beginPath();
            ctx.moveTo(width * 0.15, height * 0.5);
            ctx.lineTo(0, height * 0.55);
            ctx.lineTo(width * 0.05, height * 0.6);
            ctx.closePath();
            ctx.fill();
            
            // ë‹¤ë¦¬ (ë›°ëŠ” ëª¨ì…˜)
            const legOffset = dino.onGround ? 0 : 4 * scale;
            // ì•ë‹¤ë¦¬ (ì˜¤ë¥¸ìª½)
            ctx.fillRect(width * 0.55, height * 0.65 - legOffset, width * 0.12, height * 0.25);
            // ë’·ë‹¤ë¦¬ (ì™¼ìª½)
            ctx.fillRect(width * 0.25, height * 0.7 - legOffset, width * 0.15, height * 0.2);
            
            // ë°œí†± (ê²€ì€ìƒ‰)
            ctx.fillRect(width * 0.55, height * 0.85 - legOffset, width * 0.1, 3 * scale);
            ctx.fillRect(width * 0.25, height * 0.85 - legOffset, width * 0.12, 3 * scale);
            
            // ëˆˆ (í°ìƒ‰ ë°°ê²½ì— ê²€ì€ ë™ê³µ, ê°ì§„ ì‚¬ê°í˜•)
            ctx.fillStyle = '#fff';
            ctx.fillRect(width * 0.6, height * 0.2, 8 * scale, 8 * scale);
            ctx.fillRect(width * 0.7, height * 0.2, 8 * scale, 8 * scale);
            
            ctx.fillStyle = '#000';
            ctx.fillRect(width * 0.62, height * 0.22, 4 * scale, 4 * scale);
            ctx.fillRect(width * 0.72, height * 0.22, 4 * scale, 4 * scale);
            
            // ì… (ê²€ì€ ì„ , ê°ì§„)
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2 * scale;
            ctx.beginPath();
            ctx.moveTo(width * 0.65, height * 0.35);
            ctx.lineTo(width * 0.69, height * 0.38);
            ctx.lineTo(width * 0.73, height * 0.35);
            ctx.stroke();
            
            // ë“± ê°€ì‹œ (ê°ì§„ ì‚¼ê°í˜•ë“¤, ê²€ì€ìƒ‰)
            ctx.fillStyle = '#000';
            for (let i = 0; i < 4; i++) {
                const spikeX = width * (0.25 + i * 0.1);
                ctx.beginPath();
                ctx.moveTo(spikeX, height * 0.25);
                ctx.lineTo(spikeX - width * 0.02, height * 0.15);
                ctx.lineTo(spikeX + width * 0.02, height * 0.15);
                ctx.closePath();
                ctx.fill();
            }
            
            ctx.restore();
        }
        
        // roundRect í´ë¦¬í•„ (êµ¬í˜• ë¸Œë¼ìš°ì € ì§€ì›)
        if (!CanvasRenderingContext2D.prototype.roundRect) {
            CanvasRenderingContext2D.prototype.roundRect = function(x, y, width, height, radius) {
                this.beginPath();
                this.moveTo(x + radius, y);
                this.lineTo(x + width - radius, y);
                this.quadraticCurveTo(x + width, y, x + width, y + radius);
                this.lineTo(x + width, y + height - radius);
                this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
                this.lineTo(x + radius, y + height);
                this.quadraticCurveTo(x, y + height, x, y + height - radius);
                this.lineTo(x, y + radius);
                this.quadraticCurveTo(x, y, x + radius, y);
                this.closePath();
            };
        }

        // ì¥ì• ë¬¼ ê·¸ë¦¬ê¸° (ê²€ì€ìƒ‰, ê°ì§„)
        function drawObstacles() {
            obstacles.forEach(obstacle => {
                const x = obstacle.x * scale;
                const y = obstacle.y * scale;
                const width = obstacle.width * scale;
                const height = obstacle.height * scale;
                
                // ê²€ì€ìƒ‰
                ctx.fillStyle = '#000';
                ctx.fillRect(x, y, width, height);
            });
        }

        // ì§€ë©´ ê·¸ë¦¬ê¸° (ê²€ì€ìƒ‰)
        function drawGround() {
            const groundY = canvas.height - 50 * scale;
            const groundHeight = 50 * scale;
            
            // ê²€ì€ìƒ‰
            ctx.fillStyle = '#000';
            ctx.fillRect(0, groundY, canvas.width, groundHeight);
        }

        // ì¶©ëŒ ê°ì§€
        function checkCollision() {
            obstacles.forEach(obstacle => {
                if (dino.x < obstacle.x + obstacle.width &&
                    dino.x + dino.width > obstacle.x &&
                    dino.y < obstacle.y + obstacle.height &&
                    dino.y + dino.height > obstacle.y) {
                    gameOver();
                }
            });
        }

        // ê²Œì„ ì˜¤ë²„
        function gameOver() {
            gameRunning = false;
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('dinoHighScore', highScore);
                highScoreElement.textContent = highScore;
            }
            finalScoreElement.textContent = score;
            gameOverScreen.style.display = 'block';
        }

        // ê²Œì„ ì—…ë°ì´íŠ¸
        function update() {
            if (!gameRunning) return;

            // ê³µë£¡ ë¬¼ë¦¬
            dino.velocityY += dino.gravity;
            dino.y += dino.velocityY;

            // ì§€ë©´ ì¶©ëŒ (ë¹„ìœ¨ ê¸°ë°˜)
            const groundY = BASE_HEIGHT - 50; // ê¸°ë³¸ ì§€ë©´ ìœ„ì¹˜ (ìŠ¤ì¼€ì¼ ì ìš© ì „)
            if (dino.y + dino.height >= groundY) {
                dino.y = groundY - dino.height;
                dino.velocityY = 0;
                dino.onGround = true;
            } else {
                dino.onGround = false;
            }

            // ì¥ì• ë¬¼ ìƒì„±
            obstacleTimer++;
            const scaledSpeed = gameSpeed * scale;
            if (obstacleTimer > 120 - scaledSpeed * 2) {
                const obstacleY = BASE_HEIGHT - 50 - 40; // ê¸°ë³¸ ìœ„ì¹˜ (ìŠ¤ì¼€ì¼ ì ìš© ì „)
                obstacles.push({
                    x: BASE_WIDTH,
                    y: obstacleY,
                    width: 30,
                    height: 40
                });
                obstacleTimer = 0;
            }

            // ì¥ì• ë¬¼ ì´ë™
            obstacles.forEach((obstacle, index) => {
                obstacle.x -= gameSpeed;
                if (obstacle.x + obstacle.width < 0) {
                    obstacles.splice(index, 1);
                    score += 10;
                    scoreElement.textContent = score;
                    
                    // ì ìˆ˜ì— ë”°ë¼ ì†ë„ ì¦ê°€
                    if (score % 100 === 0 && gameSpeed < 12) {
                        gameSpeed += 0.5;
                    }
                }
            });

            // ì¶©ëŒ ì²´í¬
            checkCollision();
        }

        // ê²Œì„ ë Œë”ë§
        function render() {
            // ë°°ê²½ ì§€ìš°ê¸° (í°ìƒ‰)
            ctx.fillStyle = '#fff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // ê²Œì„ ìš”ì†Œ ê·¸ë¦¬ê¸°
            drawGround();
            drawDino();
            drawObstacles();
        }

        // ê²Œì„ ë£¨í”„
        function gameLoop() {
            update();
            render();
            requestAnimationFrame(gameLoop);
        }

        // ì í”„
        function jump() {
            if (dino.onGround && gameRunning) {
                dino.velocityY = dino.jumpPower;
                dino.onGround = false;
            }
        }

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.key === 'ArrowUp') {
                e.preventDefault();
                if (!gameRunning && startScreen.style.display !== 'none') {
                    startGame();
                } else {
                    jump();
                }
            }
        });

        // ê²Œì„ ì‹œì‘
        function startGame() {
            resizeCanvas(); // í™”ë©´ í¬ê¸° ì¬ì¡°ì •
            init();
            gameRunning = true;
            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
        }

        // ê²Œì„ ì¬ì‹œì‘
        function restartGame() {
            gameOverScreen.style.display = 'none';
            startScreen.style.display = 'block';
            gameRunning = false;
            // ì‚¬ìš©ìê°€ ì‹œì‘í•˜ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ ê²Œì„ì´ ì‹œì‘ë¨
        }

        // ê²Œì„ ë£¨í”„ ì‹œì‘
        gameLoop();
    </script>
</body>
</html>

